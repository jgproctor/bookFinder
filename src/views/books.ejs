<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="/books.css" />
    </head>
    <body class="content">
        <div>
            <button>
                <a class="returnHome" href="/">Return Home</a>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M8 3.293l6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                    <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                </svg>
            </button>
            <h1 class="title">
                BookFinder
            </h1>
        </div>
        <h3 class="searchResultsHeading">
            Search Results
        </h3>
        <%if (results === undefined || results.length == 0) {%>
            <div class="alert alert-info" style="text-align:center;" role="alert">
                No results found!
            </div>
        <%} else {%>
            <div class="container" id="searchResultsTable">
                <%for(var i = 0; i < results.length; i++) {%>
                    <div class="row">
                        <div class="col-2 border bg-light" id="bookImage">
                            <img src="<%=results[i].best_book.image_url%>">
                        </div>  
                        <div class="col-3 bg-light" id="bookInfo">
                            <div>
                                <ul>
                                    <li class="bookTitleLabel">
                                        Title: 
                                        <br>
                                        <%=results[i].best_book.title%>
                                    </li>
                                    <hr class="divider" color="black" display="inherit">
                                    <li class="bookAuthorLabel">
                                        Author: 
                                        <br>
                                        <%=results[i].best_book.author.name%>
                                    </li>
                                    <button onClick="showLoadingButton()" id="moreInfoButton">
                                        <a href="https://www.goodreads.com/book/title?id=<%=results[i].best_book.title%>" onClick>More info</a>
                                    </button>
                                    <div>
                                        <button class="btn btn-primary" id="loadingButton" style="visibility: hidden;" disabled>
                                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                            <span class="sr-only">Loading...</span>
                                        </button>
                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>
                <%}%>
            </div>
        <%}%>
        <script>
            function showLoadingButton() {
                document.getElementById('loadingButton').style.visibility = 'visible';
                document.getElementById('moreInfoButton').style.disabled = true;
            }
        </script>
    </body>
</html>